<!DOCTYPE html>
<head>
<title>Blinky Squares by Charlton Trezevant</title>
<meta name="author" content="Charlton Trezevant">
<meta name="description" content="Trippy, blinky squares!">

<!--
Hi there!

This is another one of my old projects that I hope you can learn from.
I've gone back and thoroughly commented everything, and so it should be very straightforward.
Have fun, and enjoy!
---

LICENSE:

The MIT License (MIT)

Copyright (c) 2015 Charlton Trezevant - ct [at ] charltontrezevant .com

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
-->

<style>

  /* Set the background color of the body and position everything in (roughly) the center */
  body {
   background-color: #F7F7F7;
   margin: auto;
   position: absolute;
   top: 0;
   left: 0;
   bottom: 0;
   right: 0;
  }

  /* Set some basic styles for our square elements, including the size, margin, and default color. */
  .square {
    display: inline-block;
    width: 100px;
    height: 200px;
    margin: 10px;
    background-color: blue;
  }
  </style>
</head>

<body>

  <!-- This is an empty div that will hold the grid, generated by the script below. -->
  <div id="board">
  </div>

  <script>
    /* Calculate the maximum number of rows and cells are for the current window dimensions.
     * We know that each cell has a height of 200px and a width of 100px.
     * We also know that each cell has a margin (whitespace) of 10px around it on all sides.
     * Therefore, we can divide the height/width of the window by the height/width of the squares to
     * find the maximum number of rows and columns we can fit in any given window size.
     */
    var maxRows = Math.floor(window.innerHeight / 210);
    var maxCells = Math.floor(window.innerWidth / 110) - 1;

    //This function generates a row of squares, and then fills that row with squares.
    function genRows() {
      //For loop to generate the maximum number of rows possible.
      for(var i = 0; i < maxRows; i++) {
        /* Add a new div inside of the "board" div with an ID of whatever number from 0 - maxRows we're currently on.
         * First, we use the document.querySelector method to find the element "board" in the DOM.
         * Next, we create a string by concatenating the preset HTML and the varable i to create a single string that
         *  ends up being a single element with a unique numeric ID.
         * Once that's done, we use the += operator to tell the interpreter that we want to add this string to the current value
         *  of #board's inner HTML content.
         * Finally, we fill our new div with squares by calling the genCells function with the current row number as an argument.
         */
        document.querySelector('#board').innerHTML += "<div class='row' id='#" + i + "'></div>";
        genCells(i);
      }
    }

    function genCells(row) {
      //For loop which fills the newly generated row with as many cells as possible on the X-axis.
      for(var j = 0; j < maxCells; j++) {
        //Notice how the variable i from our for loop in genRows became the variable row.
        //Add a new square to the current row, in the same way as above.
        document.getElementById("#"+row).innerHTML += "<div class='square' style='background-color:" + genColor() + ";'></div>"
      }
    }

    function genColor() {
      //Something akin to an array that holds all the valid hex characters.
      var letters = '0,1,2,3,4,5,6,7,8,9,A,B,C,D,E,F'.split(',');
      //Initialize our variables for later use.
      var hex = '', i;
      //A for loop that will generate a 6 character hexadecimal value.
      for (i = 0; i < 6; i++ ) {
        //Select a value from our letters array by generating a random whole number between 0 and 16.
        hex += letters[Math.floor(Math.random() * 16)];
      }
      //Make sure that we never generate "invisible" squares that are the same color as the body.
      if (hex != 'F7F7F7') {
        //Returns the full hex code.
        return '#' + hex;
      //If we somehow did generate a hex value that is the same as the body, however,
      } else {
        //We return the hex code for black.
        return '#000000'
      }
    }

    //This function empties the contents of the board full of squares, recalculates the max mumber of rows/squares, dnd regenerates the board.
    function refreshBoard() {
      //Clear the board.
      document.querySelector('#board').innerHTML = null;
      //Redo our square calculations
      maxRows = Math.floor(window.innerHeight / 210);
      maxCells = Math.floor(window.innerWidth / 110) - 1;
      //Render the board.
      genRows();
    }

    //Initialize the board on load, and refresh it every second.
    window.onLoad = refreshBoard();
    setInterval(function () {refreshBoard()}, 1000);

    //When the user resizes the window, we want the board to reflect the changes as well.
    window.addEventListener("resize", refreshBoard);
  </script>
</body>
